<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üéì Dijkstra's Algorithm Visual Demo</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f8f9fa;
      color: #333;
      padding: 20px;
    }
    h1, h2 {
      color: #0074D9;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ccc;
    }
    th {
      background-color: #0074D9;
      color: white;
    }
    tr.visited {
      background-color: #d4edda;
    }
    tr.current {
      background-color: #fff3cd;
    }
    button {
      background-color: #28a745;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
    .explanation {
      margin-bottom: 20px;
      padding: 15px;
      background: #e9ecef;
      border-left: 5px solid #0074D9;
    }
  </style>
</head>
<body>
  <h1>üîç Dijkstra's Algorithm: Step-by-Step Visualization</h1>
  <p class="explanation" id="explanation">Press "Next Step" to start walking through the algorithm.</p>
  <table id="table">
    <thead>
      <tr>
        <th>Node</th>
        <th>Visited</th>
        <th>Distance from Start</th>
        <th>Predecessor</th>
      </tr>
    </thead>
    <tbody id="table-body">
    </tbody>
  </table>
  <button onclick="nextStep()">‚ñ∂Ô∏è Next Step</button>

  <script>
    const INF = Infinity;
    const nodes = ['1', '2', '3', '4', '5'];
    const A = [
      [INF, 1, 10, INF, 5],
      [1, INF, 8, INF, INF],
      [10, 8, INF, 1, 6],
      [INF, INF, 1, INF, 1],
      [5, INF, 6, 1, INF]
    ];

    let d = Array(nodes.length).fill(INF);
    let s = Array(nodes.length).fill('-');
    let visited = Array(nodes.length).fill(false);
    let currentStep = 0;
    let currentNode = -1;
    let initialized = false;

    function updateTable() {
      const tbody = document.getElementById("table-body");
      tbody.innerHTML = "";
      for (let i = 0; i < nodes.length; i++) {
        const row = document.createElement("tr");
        if (visited[i]) row.classList.add("visited");
        if (i === currentNode) row.classList.add("current");

        row.innerHTML = `
          <td>${nodes[i]}</td>
          <td>${visited[i] ? "‚úÖ" : "‚ùå"}</td>
          <td>${d[i] === INF ? "‚àû" : d[i]}</td>
          <td>${s[i] === '-' ? '-' : nodes[s[i]]}</td>
        `;
        tbody.appendChild(row);
      }
    }

    function nextStep() {
      const explainBox = document.getElementById("explanation");

      if (!initialized) {
        d[0] = 0;
        initialized = true;
        explainBox.textContent = `Initialize distances: set d[1] = 0, all others = ‚àû. Starting from node 1.`;
        updateTable();
        return;
      }

      let u = -1;
      for (let i = 0; i < nodes.length; ++i) {
        if (!visited[i] && (u === -1 || d[i] < d[u])) {
          u = i;
        }
      }

      if (u === -1 || d[u] === INF) {
        explainBox.textContent = "No more reachable nodes. Algorithm finished.";
        return;
      }

      currentNode = u;
      visited[u] = true;
      explainBox.textContent = `Visit node ${nodes[u]} and update its neighbors.`;

      for (let v = 0; v < nodes.length; ++v) {
        if (A[u][v] !== INF && !visited[v]) {
          if (d[u] + A[u][v] < d[v]) {
            d[v] = d[u] + A[u][v];
            s[v] = u;
          }
        }
      }

      updateTable();
    }
  </script>
</body>
</html>
