<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dijkstra's Algorithm Visualizer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    .visited {
      background-color: #c8e6c9;
    }
    .current {
      background-color: #fff59d;
    }
    .inf {
      color: #999;
    }
    .highlight {
      background-color: #ffccbc;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .explanation {
      margin-top: 20px;
      padding: 10px;
      background-color: #e3f2fd;
      border-left: 5px solid #2196f3;
    }
  </style>
</head>
<body>
  <h1>Dijkstra's Algorithm Step-by-Step</h1>

  <div class="explanation" id="explanation">
    Click "Next Step" to begin.
  </div>

  <table id="table"></table>
  <br>
  <button onclick="nextStep()">Next Step</button>

  <script>
    const INF = Infinity;
    const A = [
      [INF, 1, 10, INF, 5],
      [1, INF, 8, INF, INF],
      [10, 8, INF, 1, 6],
      [INF, INF, 1, INF, 1],
      [5, INF, 6, 1, INF]
    ];

    const nodeName = i => String(i + 1);
    let n = A.length;
    let d = new Array(n).fill(INF);
    let s = new Array(n).fill(-1);
    let visited = new Array(n).fill(false);
    let step = 0;
    let start = 0;
    let end = 4;

    d[start] = 0;

    function updateTable(current = -1) {
      const table = document.getElementById('table');
      let html = '<tr><th>Node</th>' + d.map((_, i) => `<th>${nodeName(i)}</th>`).join('') + '</tr>';
      html += '<tr><td>Distance</td>' + d.map((val, i) => {
        let style = visited[i] ? 'visited' : (i === current ? 'current' : '');
        return `<td class="${style}">${val === INF ? '<span class="inf">âˆž</span>' : val}</td>`;
      }).join('') + '</tr>';
      html += '<tr><td>Predecessor</td>' + s.map(val => `<td>${val === -1 ? '-' : nodeName(val)}</td>`).join('') + '</tr>';
      table.innerHTML = html;
    }

    function nextStep() {
      let u = -1;
      for (let i = 0; i < n; ++i) {
        if (!visited[i] && (u === -1 || d[i] < d[u])) {
          u = i;
        }
      }

      if (u === -1 || d[u] === INF) {
        document.getElementById('explanation').innerText = "All remaining nodes are unreachable.";
        return;
      }

      visited[u] = true;
      document.getElementById('explanation').innerText = `Step ${step + 1}: Visit node ${nodeName(u)} with distance ${d[u]}`;

      for (let v = 0; v < n; ++v) {
        if (A[u][v] !== INF && !visited[v]) {
          if (d[u] + A[u][v] < d[v]) {
            d[v] = d[u] + A[u][v];
            s[v] = u;
          }
        }
      }
      updateTable(u);
      step++;
    }

    updateTable();
  </script>
</body>
</html>
