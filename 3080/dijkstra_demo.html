<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dijkstra Visualization</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1b1b1b;
      color: #eee;
      text-align: center;
      padding: 20px;
    }
    table {
      margin: auto;
      border-collapse: collapse;
    }
    td, th {
      padding: 10px;
      border: 1px solid #666;
      width: 50px;
    }
    .highlight {
      background-color: gold;
      color: black;
    }
    .visited {
      background-color: #36c36c;
      color: black;
    }
  </style>
</head>
<body>
  <h2>üìç Dijkstra‚Äôs Algorithm Step-by-Step</h2>
  <p>Click the button to go through each step:</p>
  <button onclick="nextStep()">‚ñ∂Ô∏è Next Step</button>

  <h3>Distance Array</h3>
  <div id="distanceDisplay"></div>

  <script>
    const INF = Infinity;
    const A = [
      [INF, 1, 10, INF, 5],
      [1, INF, 8, INF, INF],
      [10, 8, INF, 1, 6],
      [INF, INF, 1, INF, 1],
      [5, INF, 6, 1, INF]
    ];
    const n = A.length;
    const d = new Array(n).fill(INF);
    const s = new Array(n).fill(-1);
    const visited = new Array(n).fill(false);

    let step = 0;
    let current = -1;
    d[0] = 0; // Start at node 0 ("1")

    function nodeName(i) {
      return (i + 1).toString();
    }

    function nextStep() {
      // Find unvisited node with smallest d value
      let u = -1;
      for (let i = 0; i < n; i++) {
        if (!visited[i] && (u === -1 || d[i] < d[u])) {
          u = i;
        }
      }

      if (u === -1 || d[u] === INF) {
        alert("All reachable nodes have been visited or no path exists.");
        return;
      }

      visited[u] = true;
      current = u;

      // Update neighbors
      for (let v = 0; v < n; v++) {
        if (A[u][v] !== INF && !visited[v]) {
          if (d[u] + A[u][v] < d[v]) {
            d[v] = d[u] + A[u][v];
            s[v] = u;
          }
        }
      }

      displayTable();
      step++;
    }

    function displayTable() {
      let html = '<table><tr><th>Node</th>';
      for (let i = 0; i < n; i++) html += `<th>${nodeName(i)}</th>`;
      html += '</tr><tr><td>d</td>';
      for (let i = 0; i < n; i++) {
        const val = (d[i] === INF ? '‚àû' : d[i]);
        let className = visited[i] ? 'visited' : (i === current ? 'highlight' : '');
        html += `<td class="${className}">${val}</td>`;
      }
      html += '</tr><tr><td>s</td>';
      for (let i = 0; i < n; i++) {
        html += `<td>${s[i] === -1 ? '-' : nodeName(s[i])}</td>`;
      }
      html += '</tr></table>';

      document.getElementById("distanceDisplay").innerHTML = html;
    }

    displayTable(); // Initial state
  </script>
</body>
</html>
