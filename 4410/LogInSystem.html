<!DOCTYPE html>
<html>

<head>
	<title>PHP Log In Forms</title>
	<link href="../CSS/Site.css" type="text/css" rel="stylesheet">
	 <!-- Prism.js CSS for styling -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
</head>

<body>

<div id="main">

	<h1>Secure Login System</h1>

	This Secure Login System example is a practical and reliable web-based application built with PHP and MySQL that demonstrates how real-world websites 
	manage user authentication securely. Instead of storing plain-text passwords, this system uses <font color="blue"><b>password hashing (encryption)</b></font> to protect 
	user credentials. Users can register with a unique username and password, log in securely using hashed credentials, access a protected dashboard, 
	and log out safely
	
	<h2>Folder Structure</h2>
  	<pre>
	login-system/
		‚îÇ
		‚îú‚îÄ‚îÄ db.php               ‚Üê Database connection
		‚îú‚îÄ‚îÄ register.php         ‚Üê Registration form & logic
		‚îú‚îÄ‚îÄ login.php            ‚Üê Login form & logic
		‚îú‚îÄ‚îÄ dashboard.php        ‚Üê Protected page
		‚îú‚îÄ‚îÄ logout.php           ‚Üê Logout logic
		‚îú‚îÄ‚îÄ style.css            ‚Üê Styling
	</pre>
	
	<h2>Step-by-Step Files</h2>

	<h3>db.php</h3>
	<pre>
		 <code class="language-jsx">
		&lt;?php
			$conn = new mysqli("localhost", "root", "", "login_demo");
			if ($conn->connect_error) {
			    die("Connection failed: " . $conn->connect_error);
			}
		?&gt;
		 </code>
	</pre>

	<section>
	  <h3>üîç What's happening here?</h3>
	  <p>You're creating a new connection to your MySQL database using PHP.</p>
	  <ul>
	    <li>&star; <code>"localhost"</code> ‚Üí This tells PHP that the MySQL server is on the same machine (local server).</li>
	    <li>&star; <code>"root"</code> ‚Üí The <strong>MySQL username</strong>. On XAMPP, the default is usually <code>root</code>.</li>
	    <li>&star; <code>""</code> ‚Üí The <strong>password</strong>. XAMPP‚Äôs root user usually has no password by default.</li>
	    <li>&star; <code>"login_demo"</code> ‚Üí The name of the <strong>database</strong> you want to use.</li>
	    <li>&star; <code>$conn-&gt;connect_error</code> ‚Üí This will contain a message if the connection fails.</li>
    	    <li>&star; <code>die("Connection failed: ...")</code> ‚Üí If there's a problem, this stops the script and prints the error message.</li>
	  </ul>
	</section>
	<hr>
	
	<h3>register.php</h3>
	<pre>
		 <code class="language-jsx">
		&lt;?php
		require 'db.php';
		
		if ($_SERVER["REQUEST_METHOD"] == "POST") {
		    $username = $_POST["username"];
		    $password = password_hash($_POST["password"], PASSWORD_DEFAULT);
		
		    $stmt = $conn-&gt;prepare("INSERT INTO users (username, password) VALUES (?, ?)");
		    $stmt-&gt;bind_param("ss", $username, $password);
		    if ($stmt-&gt;execute()) {
		        echo "Registered successfully!";
		    } else {
		        echo "Username already taken.";
		    }
		}
		?&gt;

		&lt;link rel="stylesheet" href="style.css"&gt;
		&lt;form method="post"&gt;
		    &lt;h2&gt;Register&lt;/h2&gt;
		    Username: &lt;input name="username" required&gt;&lt;br&gt;
		    Password: &lt;input type="password" name="password" required&gt;&lt;br&gt;
		    &lt;button type="submit"&gt;Register&lt;/button&gt;
		&lt;/form&gt;
		 </code>
	</pre>
	<section>
		  <h3>üõ†Ô∏è What‚Äôs happening in the registration logic?</h3>
		  <p>This PHP code runs when a user submits the registration form. Let‚Äôs break it down step by step:</p>
		  <ul>
		    <li>&star; <code>require 'db.php';</code> ‚Üí Includes the file that connects to the MySQL database.</li>
		
		    <li>&star; <code>$password = password_hash($_POST["password"], PASSWORD_DEFAULT);</code> ‚Üí 
		      Encrypts the password using a secure hashing algorithm so we never store plain text passwords in the database.</li>
		
		    <li>&star; <code>$stmt = $conn-&gt;prepare("INSERT INTO users (username, password) VALUES (?, ?)");</code> ‚Üí 
		      Prepares an SQL statement with placeholders <code>?</code> for safely inserting user data.</li>
		
		    <li>&star; <code>$stmt-&gt;bind_param("ss", $username, $password);</code> ‚Üí
		      Binds the actual values to the placeholders. The <code>"ss"</code> means:
		      <ul>
		        <li>First <code>s</code> ‚Üí string for <code>$username</code></li>
		        <li>Second <code>s</code> ‚Üí string for <code>$password</code></li>
		      </ul>
		    </li>
		
		    <li>&star; <code>if ($stmt-&gt;execute())</code> ‚Üí
		      Tries to run the prepared statement:
		      <ul>
		        <li>If successful, the user is registered and sees <strong>"Registered successfully!"</strong></li>
		        <li>If the username already exists (e.g., duplicate entry), it shows <strong>"Username already taken."</strong></li>
		      </ul>
		    </li>
		  </ul>
	</section>

	<hr>
	<h3>login.php</h3>
	<pre>
		 <code class="language-jsx">
		&lt;?php
		session_start();
		require 'db.php';
		
		if ($_SERVER["REQUEST_METHOD"] == "POST") {
		    $username = $_POST["username"];
		    $password = $_POST["password"];
		
		    $stmt = $conn-&gt;prepare("SELECT id, password FROM users WHERE username = ?");
		    $stmt-&gt;bind_param("s", $username);
		    $stmt-&gt;execute();
		    $stmt-&gt;store_result();
		
		    if ($stmt-&gt;num_rows === 1) {
		        $stmt-&gt;bind_result($id, $hashed_password);
		        $stmt-&gt;fetch();
		        if (password_verify($password, $hashed_password)) {
		            $_SESSION["user_id"] = $id;
		            header("Location: dashboard.php");
		            exit;
		        }
		    }
		    echo "Invalid username or password.";
		}
		?&gt;

		&lt;link rel="stylesheet" href="style.css"&gt;
		&lt;form method="post"&gt;
		    &lt;h2&gt;Login&lt;/h2&gt;
		    Username: &lt;input name="username" required&gt;&lt;br&gt;
		    Password: &lt;input type="password" name="password" required&gt;&lt;br&gt;
		    &lt;button type="submit"&gt;Login&lt;/button&gt;
		&lt;/form&gt;
		 </code>
	</pre>

	<hr>
	
	<h3>dashboard.php</h3>
	
	<pre>
		 <code class="language-jsx">
		&lt;link rel="stylesheet" href="style.css"&gt;
		&lt;?php  
		    session_start();  
		    if (!isset($_SESSION["user_id"])) {  
		        header("Location: login.php");  
		        exit;  
		    }  
		    echo "&lt;h2&gt;Welcome! You are logged in.&lt;/h2&gt;";  
		    echo "&lt;a href='logout.php'&gt;Logout&lt;/a&gt;";  
		?&gt;
		 </code>
	</pre>

	<h3>logout.php</h3>
	<pre>
		 <code class="language-jsx">
		&lt;?php
		session_start();
		session_destroy();
		header("Location: login.php");
		exit;
		?&gt;
		 </code>
	</pre>

	<h3>style.css</h3>
	<pre>
		 <code class="language-jsx">
		body {
		    font-family: Arial, sans-serif;
		    background-color: #f7f7f7;
		    padding: 30px;
		}
		form {
		    background: #fff;
		    padding: 20px;
		    border-radius: 8px;
		    box-shadow: 0 0 10px #ccc;
		}
		input {
		    margin-bottom: 10px;
		    padding: 8px;
		    width: 200px;
		}
		button {
		    padding: 10px;
		}
		 </code>
	</pre>

	<h2>Setup Instructions</h2>
	<ul>
		<li>&star; Put all files into your XAMPP <font color="blue"><b>htdocs/login-system</b></font> folder</li>
		<li>&star; We need to create a <b><font color="blue">database</font></b> and a <b><font color="blue">table</font></b> in your phpmyadmin in XAMPP</li>
	</ul>
	
	<pre>
		1. Create a database: login_demo
		2. Run this SQL:
		   CREATE TABLE users (
		       id INT AUTO_INCREMENT PRIMARY KEY,
		       username VARCHAR(50) NOT NULL UNIQUE,
		       password VARCHAR(255) NOT NULL
		   );
		3. Open register.php to create a user
		4. Open login.php to log in
		5. dashboard.php is protected
	</pre>
  </div>

    <!-- Prism.js JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js"></script>

  
</body>
</html>
