<!DOCTYPE html>
<html>

<head>
	<title>PHP Log In Forms</title>
	<link href="../CSS/Site.css" type="text/css" rel="stylesheet">
</head>

<body>

<div id="main">

	<h1>Secure Login System</h1>

	<h2>Folder Structure</h2>
  	<pre>
	login-system/
		│
		├── db.php               ← Database connection
		├── register.php         ← Registration form & logic
		├── login.php            ← Login form & logic
		├── dashboard.php        ← Protected page
		├── logout.php           ← Logout logic
		├── style.css            ← Optional styling
		└── README.txt           ← Instructions
	</pre>
	
	<h2>Step-by-Step Files</h2>

	<h3>db.php</h3>
	<pre>
		&lt;?php
			$conn = new mysqli("localhost", "root", "", "login_demo");
			if ($conn->connect_error) {
			    die("Connection failed: " . $conn->connect_error);
			}
		?&gt;
	</pre>

	<h3>register.php</h3>
	<pre>
		&lt;?php
		require 'db.php';
		
		if ($_SERVER["REQUEST_METHOD"] == "POST") {
		    $username = $_POST["username"];
		    $password = password_hash($_POST["password"], PASSWORD_DEFAULT);
		
		    $stmt = $conn-&gt;prepare("INSERT INTO users (username, password) VALUES (?, ?)");
		    $stmt-&gt;bind_param("ss", $username, $password);
		    if ($stmt-&gt;execute()) {
		        echo "Registered successfully!";
		    } else {
		        echo "Username already taken.";
		    }
		}
		?&gt;
		
		&lt;form method="post"&gt;
		    &lt;h2&gt;Register&lt;/h2&gt;
		    Username: &lt;input name="username" required&gt;&lt;br&gt;
		    Password: &lt;input type="password" name="password" required&gt;&lt;br&gt;
		    &lt;button type="submit"&gt;Register&lt;/button&gt;
		&lt;/form&gt;
	</pre>

	<h3>login.php</h3>
	<pre>
		&lt;?php
		session_start();
		require 'db.php';
		
		if ($_SERVER["REQUEST_METHOD"] == "POST") {
		    $username = $_POST["username"];
		    $password = $_POST["password"];
		
		    $stmt = $conn-&gt;prepare("SELECT id, password FROM users WHERE username = ?");
		    $stmt-&gt;bind_param("s", $username);
		    $stmt-&gt;execute();
		    $stmt-&gt;store_result();
		
		    if ($stmt-&gt;num_rows === 1) {
		        $stmt-&gt;bind_result($id, $hashed_password);
		        $stmt-&gt;fetch();
		        if (password_verify($password, $hashed_password)) {
		            $_SESSION["user_id"] = $id;
		            header("Location: dashboard.php");
		            exit;
		        }
		    }
		    echo "Invalid username or password.";
		}
		?&gt;
		
		&lt;form method="post"&gt;
		    &lt;h2&gt;Login&lt;/h2&gt;
		    Username: &lt;input name="username" required&gt;&lt;br&gt;
		    Password: &lt;input type="password" name="password" required&gt;&lt;br&gt;
		    &lt;button type="submit"&gt;Login&lt;/button&gt;
		&lt;/form&gt;
	</pre>

	<h3>dashboard.php</h3>
	<pre>
		&lt;?php  
		    session_start();  
		    if (!isset($_SESSION["user_id"])) {  
		        header("Location: login.php");  
		        exit;  
		    }  
		    echo "&lt;h2&gt;Welcome! You are logged in.&lt;/h2&gt;";  
		    echo "&lt;a href='logout.php'&gt;Logout&lt;/a&gt;";  
		?&gt;
	</pre>

	<h3>logout.php</h3>
	<pre>
		&lt;?php
		session_start();
		session_destroy();
		header("Location: login.php");
		exit;
		?&gt;
	</pre>

	<h3>style.css</h3>
	<pre>
		body {
		    font-family: Arial, sans-serif;
		    background-color: #f7f7f7;
		    padding: 30px;
		}
		form {
		    background: #fff;
		    padding: 20px;
		    border-radius: 8px;
		    box-shadow: 0 0 10px #ccc;
		}
		input {
		    margin-bottom: 10px;
		    padding: 8px;
		    width: 200px;
		}
		button {
		    padding: 10px;
		}
	</pre>
  </div>


  
</body>
</html>
