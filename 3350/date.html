<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chapter 2: Data Preprocessing & Feature Engineering</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
   body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      background: #17191a;
      min-height: 100vh;
      color: #ff79c6;
      padding: 20px;
    }

    section {
      margin-bottom: 55px;
      background: #222025;
      border-radius: 18px;
      box-shadow: 0 4px 30px rgba(255,121,198,.09);
      padding: 36px 32px 22px 32px;
      transition: box-shadow .24s;
      border-left: 7px solid #ff79c6;
      position: relative;
      max-width: 850px;
      margin-left: auto;
      margin-right: auto;
    }

    section h4 {
      font-size: 1.18em;
      color: #ffb3de;
      margin-bottom: 5px;
      margin-top: 30px;
      font-weight: 600;
      border-bottom: 1px solid #ffb3de;
      padding-bottom: 2px;
    }

    pre {
      background: #19121a;
      color: #ffb3de;
      padding: 15px 18px;
      border-radius: 8px;
      font-size: 1.04em;
      line-height: 1.7;
      overflow-x: auto;
      box-shadow: 0 2px 10px rgba(255,121,198,0.11);
      position: relative;
    }

    pre .copy {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 8px;
      background: #21111b;
      border: 1px solid #ff79c6;
      border-radius: 6px;
      color: #ffb3de;
      font-size: 0.8em;
      cursor: pointer;
    }
    pre .copy:hover {
      background: #ff79c6;
      color: #fff;
    }
  </style>
</head>
  
<body>

<section>
  <h4>Date/Time Features – Extracting Useful Components</h4>
  <p>
    Many datasets include timestamps. By extracting information such as <em>year</em>, <em>month</em>, 
    <em>weekday</em>, or <em>hour</em>, we can uncover seasonal or time-based patterns. 
    For example, sales may spike on weekends or in December.
  </p>

  <h4>Example: Extracting Date/Time Features</h4>
  <pre> <button class="copy">Copy</button> <code>
import pandas as pd

# Example dataset with timestamps
data = {
    "event_id": [1, 2, 3, 4],
    "event_time": [
        "2022-01-15 14:30:00",
        "2022-03-20 09:15:00",
        "2022-07-04 18:45:00",
        "2022-12-31 23:59:00"
    ]
}

df = pd.DataFrame(data)

# Convert to datetime type
df["event_time"] = pd.to_datetime(df["event_time"])
print("Original Data:")
print(df)

# --- Extract Date/Time Features ---
df["year"] = df["event_time"].dt.year
df["month"] = df["event_time"].dt.month
df["weekday"] = df["event_time"].dt.weekday   # Monday=0, Sunday=6
df["hour"] = df["event_time"].dt.hour

# Define season from month
def get_season(month):
    if month in [12, 1, 2]:
        return "Winter"
    elif month in [3, 4, 5]:
        return "Spring"
    elif month in [6, 7, 8]:
        return "Summer"
    else:
        return "Fall"

df["season"] = df["month"].apply(get_season)

print("\nData with Date/Time Features:")
print(df)
  </code> </pre>

  <h4>Notes:</h4>
  <ul>
    <li><code>.dt</code> is a <strong>datetime accessor</strong> in pandas. It unlocks date/time properties from a datetime column.</li>
    <li>Examples:
      <ul>
        <li><code>.dt.year</code> → extracts the year (e.g., 2022)</li>
        <li><code>.dt.month</code> → extracts the month (1–12)</li>
        <li><code>.dt.weekday</code> → extracts the day of week (Mon=0, Sun=6)</li>
        <li><code>.dt.hour</code> → extracts the hour of the day (0–23)</li>
      </ul>
    </li>
    <li>Custom functions can add more complex features, like assigning a <code>season</code> from the month.</li>
  </ul>
</section>

<script>
  document.querySelectorAll("pre .copy").forEach(button => {
    button.addEventListener("click", () => {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        const old = button.textContent;
        button.textContent = "Copied!";
        setTimeout(() => button.textContent = old, 1500);
      });
    });
  });
</script>

</body>
</html>
