<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Euclidean Distance Visualizer</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
  <script>
    // MathJax v3 config
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['$', '$']],
        processEscapes: true
      },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js" defer></script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Roboto',Arial,sans-serif;background:#17191a;min-height:100vh;color:#ff79c6;padding:20px}
    section{margin:0 auto 55px auto;background:#222025;border-radius:18px;box-shadow:0 4px 30px rgba(255,121,198,.09);padding:36px 32px 22px 32px;border-left:7px solid #ff79c6;position:relative;max-width:1400px}
    h1{color:#ffb3de;margin:0 0 8px 0;text-align:center;font-size:2.5em}
    h2{margin:0 0 20px 0;color:#ffb3de;font-weight:700;font-size:1.8em}
    h3{font-size:1.18em;color:#ffb3de;margin-bottom:15px;font-weight:600}
    p{color:#ffd7f0;line-height:1.8}
    .subtitle{text-align:center;color:#ffd7f0;opacity:.9;font-size:1.1em;margin-bottom:20px}
    .pill{display:inline-block;background:#19121a;border:1px solid #ff79c6;border-radius:999px;padding:4px 10px;margin:2px 8px 2px 0;font-size:.9em}
    .viz-grid{display:grid;grid-template-columns:1fr 1fr;gap:30px;margin-bottom:40px}
    .viz-panel{background:#19121a;border-radius:12px;padding:25px;box-shadow:0 2px 10px rgba(255,121,198,0.11);border:1px solid rgba(255,121,198,0.2)}
    canvas{width:100%;border-radius:8px;background:#0d0a0e;box-shadow:0 2px 8px rgba(0,0,0,0.3);cursor:crosshair;display:block}
    .controls{margin-top:25px}
    .point-inputs{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
    .point-group{background:#2a252b;padding:20px;border-radius:10px;border:1px solid rgba(255,121,198,0.3)}
    .input-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
    .input-row label{font-weight:600;color:#ffb3de;min-width:25px}
    .input-row input{flex:1;padding:8px 12px;border:2px solid rgba(255,121,198,0.3);border-radius:6px;font-size:1em;background:#19121a;color:#ffd7f0;transition:border-color .3s}
    .input-row input:focus{outline:none;border-color:#ff79c6}
    .distance-display{background:linear-gradient(135deg,#ff79c6 0%,#bd5d8a 100%);color:#fff;padding:25px;border-radius:12px;text-align:center;margin-top:20px;box-shadow:0 4px 12px rgba(255,121,198,0.3)}
    .distance-value{font-size:2.5em;font-weight:bold;margin-bottom:5px}
    .distance-label{font-size:1.1em;opacity:.95}
    .formula-box{background:#2a252b;border-left:4px solid #ff79c6;padding:20px;margin-top:25px;border-radius:8px}
    .formula-box h4{color:#ffb3de;margin-bottom:10px;font-size:1.1em}
    .formula{font-family:'Courier New',monospace;font-size:1.05em;color:#ffd7f0;background:#19121a;padding:15px;border-radius:6px;margin-top:10px;overflow-x:auto}
    button{background:#ff79c6;color:#fff;border:none;padding:12px 25px;border-radius:8px;font-size:1em;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 6px rgba(255,121,198,0.3);margin-right:10px;margin-top:10px}
    button:hover{background:#ffb3de;transform:translateY(-2px);box-shadow:0 6px 12px rgba(255,121,198,0.4)}
    button:active{transform:translateY(0)}
    .info-section{background:#2a252b;border-radius:12px;padding:25px;margin-top:30px;border:1px solid rgba(255,121,198,0.2)}
    .info-section h3{color:#ffb3de;margin-bottom:15px;font-size:1.3em;border-bottom:1px solid #ff79c6;padding-bottom:8px}
    .info-section p,.info-section ul{color:#ffd7f0;line-height:1.8}
    .note{color:#ffd7f0;opacity:.9}
    @media (max-width:1200px){.viz-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>

<section>
  <center><h1><span class="pill">Euclidean Distance Visualizer</span></h1></center>
  <p class="subtitle">Interactive exploration of distance in 2D and 3D space</p>
</section>


<section>
  <div class="info-section">
    <h3>About Euclidean Distance</h3>
    <p>Euclidean distance is the straight-line distance between two points in space. It's named after Euclid and represents the shortest path between two points.</p>
  </div>
</section>


<section>
  <div class="viz-grid">
    <!-- 2D -->
    <div class="viz-panel">
      <h2>2D Euclidean Distance</h2>
      <canvas id="canvas2d" width="500" height="500"></canvas>

      <div class="controls">
        <div class="point-inputs">
          <div class="point-group">
            <h3>Point A (Red)</h3>
            <div class="input-row"><label>\(x_1\):</label><input type="number" id="ax2d" value="100" step="10"></div>
            <div class="input-row"><label>\(x_2\):</label><input type="number" id="ay2d" value="100" step="10"></div>
          </div>
          <div class="point-group">
            <h3>Point B (Blue)</h3>
            <div class="input-row"><label>\(x_1'\):</label><input type="number" id="bx2d" value="400" step="10"></div>
            <div class="input-row"><label>\(x_2'\):</label><input type="number" id="by2d" value="400" step="10"></div>
          </div>
        </div>

        <button id="rand2d">Randomize Points</button>

        <div class="distance-display">
          <div class="distance-value" id="distance2d">0</div>
          <div class="distance-label">Distance (pixels)</div>
        </div>

        <div class="formula-box">
          <h4>Formula:</h4>
          <div class="formula">$ d_2(x,x') = \sqrt{ \sum_{j=1}^{n} (x_j - x'_j)^2 } $</div>
          <div class="formula" id="calc2d"></div>
          <br>
          2D case: n = 2 (x₁ and x₂)
        </div>
      </div>
    </div>

    <!-- 3D -->
    <div class="viz-panel">
      <h2>3D Euclidean Distance</h2>
      <canvas id="canvas3d" width="500" height="500"></canvas>

      <div class="controls">
        <div class="point-inputs">
          <div class="point-group">
            <h3>Point A (Red)</h3>
            <div class="input-row"><label>\(x_1\):</label><input type="number" id="ax3d" value="1" step="0.5"></div>
            <div class="input-row"><label>\(x_2\):</label><input type="number" id="ay3d" value="1" step="0.5"></div>
            <div class="input-row"><label>\(x_3\):</label><input type="number" id="az3d" value="1" step="0.5"></div>
          </div>
          <div class="point-group">
            <h3>Point B (Blue)</h3>
            <div class="input-row"><label>\(x_1'\):</label><input type="number" id="bx3d" value="4" step="0.5"></div>
            <div class="input-row"><label>\(x_2'\):</label><input type="number" id="by3d" value="5" step="0.5"></div>
            <div class="input-row"><label>\(x_3'\):</label><input type="number" id="bz3d" value="2" step="0.5"></div>
          </div>
        </div>

        <button id="rand3d">Randomize Points</button>
        <button id="rot3d">Toggle Rotation</button>

        <div class="distance-display">
          <div class="distance-value" id="distance3d">0</div>
          <div class="distance-label">Distance (units)</div>
        </div>

        <div class="formula-box">
          <h4>Formula:</h4>
          <div class="formula">$ d_2(x,x') = \sqrt{ \sum_{j=1}^{n} (x_j - x'_j)^2 } $</div>
          <div class="formula" id="calc3d"></div>
          <br>
          3D case: n = 3 (x₁, x₂, and x₃)
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="info-section">
    <h3>Key Properties:</h3>
    <ul>
      <li>Always non-negative (distance ≥ 0)</li>
      <li>Symmetric: distance(A,B) = distance(B,A)</li>
      <li>Satisfies the triangle inequality</li>
      <li>Generalizes to any number of dimensions</li>
      <li><b>n</b> is the number of features (or dimensions, or variables) </li>
    </ul>
    <p class="note"><strong>2D:</strong> Click the canvas to move the nearer point. <br><strong>3D:</strong> Toggle rotation to see different angles.</p>

  </div>
</section>

<script>
  // ===== Canvas helpers: HiDPI scaling =====
  function setupHiDPI(canvas) {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    // keep CSS size, scale drawing buffer
    canvas.width  = Math.round(rect.width  * dpr);
    canvas.height = Math.round(rect.height * dpr);
    const ctx = canvas.getContext('2d');
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    return ctx;
  }

  const canvas2d = document.getElementById('canvas2d');
  const canvas3d = document.getElementById('canvas3d');
  let ctx2d = setupHiDPI(canvas2d);
  let ctx3d = setupHiDPI(canvas3d);

  // Re-scale on resize
  window.addEventListener('resize', () => {
    ctx2d = setupHiDPI(canvas2d);
    ctx3d = setupHiDPI(canvas3d);
    draw2D();
    draw3D();
  });

  // ===== 2D =====
  function draw2D() {
    const ax = parseFloat(document.getElementById('ax2d').value);
    const ay = parseFloat(document.getElementById('ay2d').value);
    const bx = parseFloat(document.getElementById('bx2d').value);
    const by = parseFloat(document.getElementById('by2d').value);

    const W = canvas2d.width  / (window.devicePixelRatio || 1);
    const H = canvas2d.height / (window.devicePixelRatio || 1);

    ctx2d.clearRect(0, 0, W, H);

    // Grid (pixel-aligned for crispness)
    ctx2d.strokeStyle = '#2a252b';
    ctx2d.lineWidth = 1;
    for (let i = 0; i <= W; i += 50) {
      ctx2d.beginPath(); ctx2d.moveTo(Math.floor(i)+0.5, 0); ctx2d.lineTo(Math.floor(i)+0.5, H); ctx2d.stroke();
    }
    for (let j = 0; j <= H; j += 50) {
      ctx2d.beginPath(); ctx2d.moveTo(0, Math.floor(j)+0.5); ctx2d.lineTo(W, Math.floor(j)+0.5); ctx2d.stroke();
    }

    // Axes
    ctx2d.strokeStyle = '#ff79c6'; ctx2d.lineWidth = 2;
    ctx2d.beginPath(); ctx2d.moveTo(0, Math.floor(H/2)+0.5); ctx2d.lineTo(W, Math.floor(H/2)+0.5); ctx2d.stroke();
    ctx2d.beginPath(); ctx2d.moveTo(Math.floor(W/2)+0.5, 0); ctx2d.lineTo(Math.floor(W/2)+0.5, H); ctx2d.stroke();

    // Line between points
    ctx2d.strokeStyle = '#ff79c6'; ctx2d.lineWidth = 3; ctx2d.setLineDash([10,5]);
    ctx2d.beginPath(); ctx2d.moveTo(ax, ay); ctx2d.lineTo(bx, by); ctx2d.stroke(); ctx2d.setLineDash([]);

    // Component legs
    ctx2d.strokeStyle = '#ffb3de'; ctx2d.lineWidth = 2; ctx2d.setLineDash([5,5]);
    ctx2d.beginPath(); ctx2d.moveTo(ax, ay); ctx2d.lineTo(bx, ay); ctx2d.stroke();
    ctx2d.beginPath(); ctx2d.moveTo(bx, ay); ctx2d.lineTo(bx, by); ctx2d.stroke(); ctx2d.setLineDash([]);

    // Points
    function drawPt(x,y,fill){
      ctx2d.fillStyle = fill;
      ctx2d.beginPath(); ctx2d.arc(x, y, 10, 0, Math.PI*2); ctx2d.fill();
      ctx2d.strokeStyle = '#ffb3de'; ctx2d.lineWidth = 3; ctx2d.stroke();
    }
    drawPt(ax, ay, '#ef4444'); // A red
    drawPt(bx, by, '#3b82f6'); // B blue

    // Distance
    const distance = Math.hypot(bx - ax, by - ay);
    document.getElementById('distance2d').textContent = distance.toFixed(2);
    const calc2d = document.getElementById('calc2d');
    calc2d.textContent = ''; // clear before injecting MJ
    calc2d.innerHTML = `\\( d_2(x,x^\\prime) = \\sqrt{(x_1 - x_1')^2 + (x_2 - x_2')^2} =  \\sqrt{(${bx} - ${ax})^2 + (${by} - ${ay})^2} = ${distance.toFixed(2)} \\)`;
    if (window.MathJax?.typesetPromise) MathJax.typesetPromise([calc2d]);
  }

  // Click to move nearer point (correct when canvas is CSS-scaled)
  canvas2d.addEventListener('click', (e) => {
    const rect = canvas2d.getBoundingClientRect();
    const scaleX = canvas2d.width  / rect.width  / (window.devicePixelRatio || 1);
    const scaleY = canvas2d.height / rect.height / (window.devicePixelRatio || 1);
    const x = (e.clientX - rect.left) * scaleX;
    const y = (e.clientY - rect.top)  * scaleY;

    const ax = parseFloat(document.getElementById('ax2d').value);
    const ay = parseFloat(document.getElementById('ay2d').value);
    const bx = parseFloat(document.getElementById('bx2d').value);
    const by = parseFloat(document.getElementById('by2d').value);

    const distA = Math.hypot(x - ax, y - ay);
    const distB = Math.hypot(x - bx, y - by);

    if (distA < distB) {
      document.getElementById('ax2d').value = Math.round(x);
      document.getElementById('ay2d').value = Math.round(y);
    } else {
      document.getElementById('bx2d').value = Math.round(x);
      document.getElementById('by2d').value = Math.round(y);
    }
    draw2D();
  });

  // ===== 3D =====
  let rotating = false;
  let rotationAngle = 0;
  let animationId = null;

  function project3D(x, y, z, angle) {
    // simple Y-rotation + isometric projection
    const scale = 80;
    const centerX = (canvas3d.width  / (window.devicePixelRatio || 1)) / 2;
    const centerY = (canvas3d.height / (window.devicePixelRatio || 1)) / 2;

    const cosA = Math.cos(angle), sinA = Math.sin(angle);
    const rotX = x * cosA - z * sinA;
    const rotZ = x * sinA + z * cosA;

    const screenX = centerX + (rotX - y) * scale * 0.866;
    const screenY = centerY + (rotX + y) * scale * 0.5 - rotZ * scale;
    return { x: screenX, y: screenY, z: rotZ };
  }

  function draw3D() {
    const ax = parseFloat(document.getElementById('ax3d').value);
    const ay = parseFloat(document.getElementById('ay3d').value);
    const az = parseFloat(document.getElementById('az3d').value);
    const bx = parseFloat(document.getElementById('bx3d').value);
    const by = parseFloat(document.getElementById('by3d').value);
    const bz = parseFloat(document.getElementById('bz3d').value);

    const W = canvas3d.width  / (window.devicePixelRatio || 1);
    const H = canvas3d.height / (window.devicePixelRatio || 1);
    ctx3d.clearRect(0, 0, W, H);

    // Axes
    const origin = project3D(0,0,0, rotationAngle);
    const xAxis  = project3D(5,0,0, rotationAngle);
    const yAxis  = project3D(0,5,0, rotationAngle);
    const zAxis  = project3D(0,0,5, rotationAngle);

    ctx3d.lineWidth = 2;
    // X (red)
    ctx3d.strokeStyle = '#ef4444';
    ctx3d.beginPath(); ctx3d.moveTo(origin.x, origin.y); ctx3d.lineTo(xAxis.x, xAxis.y); ctx3d.stroke();
    ctx3d.fillStyle = '#ef4444'; ctx3d.font = 'bold 16px Roboto, Arial'; ctx3d.fillText('X', xAxis.x + 10, xAxis.y);
    // Y (green)
    ctx3d.strokeStyle = '#10b981';
    ctx3d.beginPath(); ctx3d.moveTo(origin.x, origin.y); ctx3d.lineTo(yAxis.x, yAxis.y); ctx3d.stroke();
    ctx3d.fillStyle = '#10b981'; ctx3d.fillText('Y', yAxis.x + 10, yAxis.y);
    // Z (blue)
    ctx3d.strokeStyle = '#3b82f6';
    ctx3d.beginPath(); ctx3d.moveTo(origin.x, origin.y); ctx3d.lineTo(zAxis.x, zAxis.y); ctx3d.stroke();
    ctx3d.fillStyle = '#3b82f6'; ctx3d.fillText('Z', zAxis.x + 10, zAxis.y);

    // Points and line
    const A = project3D(ax, ay, az, rotationAngle);
    const B = project3D(bx, by, bz, rotationAngle);

    ctx3d.strokeStyle = '#ff79c6'; ctx3d.lineWidth = 4; ctx3d.setLineDash([10,5]);
    ctx3d.beginPath(); ctx3d.moveTo(A.x, A.y); ctx3d.lineTo(B.x, B.y); ctx3d.stroke(); ctx3d.setLineDash([]);

    // Helpers to floor
    ctx3d.strokeStyle = '#ffb3de'; ctx3d.lineWidth = 1; ctx3d.setLineDash([3,3]);
    const aFloor = project3D(ax, ay, 0, rotationAngle);
    const bFloor = project3D(bx, by, 0, rotationAngle);
    ctx3d.beginPath(); ctx3d.moveTo(A.x, A.y); ctx3d.lineTo(aFloor.x, aFloor.y); ctx3d.stroke();
    ctx3d.beginPath(); ctx3d.moveTo(B.x, B.y); ctx3d.lineTo(bFloor.x, bFloor.y); ctx3d.stroke(); ctx3d.setLineDash([]);

    // Points (depth sort)
    const pts = [{p:A, color:'#ef4444', label:'A'},{p:B, color:'#3b82f6', label:'B'}].sort((u,v)=>v.p.z-u.p.z);
    for (const t of pts){
      ctx3d.fillStyle = t.color;
      ctx3d.beginPath(); ctx3d.arc(t.p.x, t.p.y, 12, 0, Math.PI*2); ctx3d.fill();
      ctx3d.strokeStyle = '#ffb3de'; ctx3d.lineWidth = 3; ctx3d.stroke();
      ctx3d.fillStyle = '#fff'; ctx3d.font='bold 12px Roboto, Arial'; ctx3d.textAlign='center'; ctx3d.textBaseline='middle';
      ctx3d.fillText(t.label, t.p.x, t.p.y);
    }

    // Distance
    const distance = Math.hypot(bx-ax, by-ay, bz-az);
    document.getElementById('distance3d').textContent = distance.toFixed(2);
    const calc3d = document.getElementById('calc3d');
    calc3d.textContent = '';
    calc3d.innerHTML = `\\( d_2(x,x^\\prime) = \\sqrt{(x_1 - x_1')^2 + (x_2 - x_2')^2 + (x_3 - x_3')^2} = \\sqrt{(${bx} - ${ax})^2 + (${by} - ${ay})^2 + (${bz} - ${az})^2} = ${distance.toFixed(2)} \\)`;
    if (window.MathJax?.typesetPromise) MathJax.typesetPromise([calc3d]);
  }

  function animate3D() {
    if (!rotating) return;
    rotationAngle += 0.01;
    draw3D();
    animationId = requestAnimationFrame(animate3D);
  }

  function toggleRotation() {
    rotating = !rotating;
    if (rotating) {
      if (!animationId) animationId = requestAnimationFrame(animate3D);
    } else {
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
    }
  }

  // ===== Randomize =====
  function randomize2D() {
    document.getElementById('ax2d').value = Math.floor(Math.random()*400)+50;
    document.getElementById('ay2d').value = Math.floor(Math.random()*400)+50;
    document.getElementById('bx2d').value = Math.floor(Math.random()*400)+50;
    document.getElementById('by2d').value = Math.floor(Math.random()*400)+50;
    draw2D();
  }
  function randomize3D() {
    const rnd = () => (Math.random()*8 - 4).toFixed(1);
    ['ax3d','ay3d','az3d','bx3d','by3d','bz3d'].forEach(id => document.getElementById(id).value = rnd());
    draw3D();
  }

  // ===== Wire up events =====
  ['ax2d','ay2d','bx2d','by2d'].forEach(id => document.getElementById(id).addEventListener('input', draw2D));
  ['ax3d','ay3d','az3d','bx3d','by3d','bz3d'].forEach(id => document.getElementById(id).addEventListener('input', draw3D));
  document.getElementById('rand2d').addEventListener('click', randomize2D);
  document.getElementById('rand3d').addEventListener('click', randomize3D);
  document.getElementById('rot3d').addEventListener('click', toggleRotation);

  // Initial draw after MathJax loads (defer ensures script tag executes after MJ is queued)
  window.addEventListener('load', () => { draw2D(); draw3D(); });
</script>

</body>
</html>
