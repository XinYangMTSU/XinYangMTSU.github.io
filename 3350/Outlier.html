<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chapter 2: Data Preprocessing & Feature Engineering</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
   body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      background: #17191a;
      min-height: 100vh;
      color: #ff79c6;
      padding: 20px;
    }

    section {
      margin-bottom: 55px;
      background: #222025;
      border-radius: 18px;
      box-shadow: 0 4px 30px rgba(255,121,198,.09);
      padding: 36px 32px 22px 32px;
      transition: box-shadow .24s;
      border-left: 7px solid #ff79c6;
      position: relative;
      max-width: 850px;
      margin-left: auto;
      margin-right: auto;
    }

    section h4 {
      font-size: 1.18em;
      color: #ffb3de;
      margin-bottom: 5px;
      margin-top: 30px;
      font-weight: 600;
      border-bottom: 1px solid #ffb3de;
      padding-bottom: 2px;
    }

    pre {
      background: #19121a;
      color: #ffb3de;
      padding: 15px 18px;
      border-radius: 8px;
      font-size: 1.04em;
      line-height: 1.7;
      overflow-x: auto;
      box-shadow: 0 2px 10px rgba(255,121,198,0.11);
      position: relative;
    }

    pre .copy {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 8px;
      background: #21111b;
      border: 1px solid #ff79c6;
      border-radius: 6px;
      color: #ffb3de;
      font-size: 0.8em;
      cursor: pointer;
    }
    pre .copy:hover {
      background: #ff79c6;
      color: #fff;
    }

    footer {
      margin-top: 46px;
      text-align: center;
      color: #ffb3de;
      font-size: 1.09em;
      letter-spacing: 1px;
      padding: 22px 0 14px 0;
      border-top: 1px solid #402138;
      background: none;
      font-weight: 500;
    }
  </style>
</head>
  
<body>

<section>
  <h4>Outlier Handling â€“ Investigate and Correct Extreme or Invalid Values</h4>
  <p>Outliers are values that are <strong>unusually high or low</strong> compared to the rest of the data. 
     They can be real unusual cases, data entry errors, or invalid values. Outlier handling helps 
     improve model performance and data accuracy.</p>

  <h4>Example: Detecting Outliers with the IQR Method</h4>
  <pre> <button class="copy">Copy</button> <code>
import pandas as pd

# Example dataset with outliers
data = {'Score': [85, 88, 90, 92, 150, 87, 89, 300]}
df = pd.DataFrame(data)
print("Original Data:")
print(df)

# Step 1: Calculate Q1 (25th percentile) and Q3 (75th percentile)
Q1 = df['Score'].quantile(0.25)
Q3 = df['Score'].quantile(0.75)
IQR = Q3 - Q1

# Step 2: Define outlier boundaries
lower_bound = Q1 - 1.5 * IQR
upper_bound = Q3 + 1.5 * IQR
print(f"\nLower Bound: {lower_bound}, Upper Bound: {upper_bound}")

# Step 3: Detect outliers
outliers = df[(df['Score'] < lower_bound) | (df['Score'] > upper_bound)]
print("\nOutliers Detected:")
print(outliers)

# Step 4: Option 1 - Remove outliers
df_no_outliers = df[(df['Score'] >= lower_bound) & (df['Score'] <= upper_bound)]

# Step 5: Option 2 - Cap outliers to boundary values
df_capped = df.copy()
df_capped.loc[df_capped['Score'] > upper_bound, 'Score'] = upper_bound
df_capped.loc[df_capped['Score'] < lower_bound, 'Score'] = lower_bound

print("\nData after Removing Outliers:")
print(df_no_outliers)

print("\nData after Capping Outliers:")
print(df_capped)
  </code> </pre>

  <p><strong>Notes:</strong></p>
  <ul>
    <li>Outliers should not always be deleted â€” investigate first if they are errors or valid rare cases.</li>
    <li>Common handling strategies: <strong>removal</strong>, <strong>capping</strong> (winsorization), or <strong>transformation</strong> (e.g., log scale).</li>
  </ul>
</section>


  <section>
  <h4>Capping (Winsorization)</h4>
  <p><strong>Capping</strong> (also called <strong>Winsorization</strong>) is an 
     <strong>outlier handling technique</strong>.</p>

  <p>Instead of removing outliers, we <strong>limit (cap)</strong> their values 
     to the nearest acceptable boundary.</p>

  <h4>ðŸ‘‰ In practice:</h4>
  <ul>
    <li>If a value is <strong>too high</strong> (above the upper bound), replace it with the <strong>upper bound</strong>.</li>
    <li>If a value is <strong>too low</strong> (below the lower bound), replace it with the <strong>lower bound</strong>.</li>
  </ul>

  <p>This way, the outlier stays in the dataset, but it no longer skews the statistics as much.</p>
</section>


<script>
  document.querySelectorAll("pre .copy").forEach(button => {
    button.addEventListener("click", () => {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        const old = button.textContent;
        button.textContent = "Copied!";
        setTimeout(() => button.textContent = old, 1500);
      });
    });
  });
</script>

</body>
</html>
