<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz 4 - Chapters 5 & 6</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    body { font-family: 'Roboto', Arial, sans-serif; margin: 0; background: linear-gradient(135deg, #06beb6 0%, #48b1bf 100%); min-height: 100vh; color: #fff; padding: 20px; display: flex; flex-direction: column; align-items: center; }
    .container { max-width: 900px; width: 100%; }
    h1 { text-align: center; font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    .subtitle { text-align: center; font-size: 1.2em; margin-bottom: 30px; opacity: 0.9; }
    .start-btn { background: rgba(255,255,255,0.95); color: #06beb6; border: none; border-radius: 15px; padding: 30px 40px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); display: block; margin: 0 auto; }
    .start-btn:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
    .quiz-card { background: rgba(255,255,255,0.95); color: #333; border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); margin-bottom: 20px; }
    .question-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid #06beb6; }
    .question-number { font-size: 1.1em; color: #f5576c; font-weight: bold; }
    .score { font-size: 1.1em; color: #06beb6; font-weight: bold; }
    .question-text { font-size: 1.2em; margin-bottom: 25px; line-height: 1.6; font-weight: 500; }
    .options { display: flex; flex-direction: column; gap: 12px; }
    .option { background: #f8f9fa; border: 2px solid #e0e0e0; border-radius: 12px; padding: 18px 20px; cursor: pointer; transition: all 0.3s; font-size: 1.05em; }
    .option:hover { background: #e0ffff; border-color: #06beb6; transform: translateX(5px); }
    .option.correct { background: #4caf50; color: white; border-color: #4caf50; }
    .option.incorrect { background: #f44336; color: white; border-color: #f44336; }
    .option.disabled { cursor: not-allowed; opacity: 0.7; }
    .text-input { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1.05em; font-family: 'Roboto', Arial, sans-serif; margin: 10px 0; box-sizing: border-box; }
    .text-input:focus { outline: none; border-color: #06beb6; }
    .submit-btn { background: #06beb6; color: white; padding: 12px 30px; border: none; border-radius: 10px; font-size: 1.1em; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 3px 10px rgba(0,0,0,0.2); margin-top: 10px; }
    .submit-btn:hover { background: #04a39c; transform: translateY(-2px); }
    .feedback { margin-top: 20px; padding: 15px; border-radius: 10px; font-size: 1.05em; line-height: 1.6; }
    .feedback.correct { background: #e8f5e9; color: #2e7d32; border-left: 4px solid #4caf50; }
    .feedback.incorrect { background: #ffebee; color: #c62828; border-left: 4px solid #f44336; }
    .btn-container { display: flex; gap: 15px; margin-top: 25px; justify-content: center; }
    .btn { padding: 12px 30px; border: none; border-radius: 10px; font-size: 1.1em; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 3px 10px rgba(0,0,0,0.2); }
    .btn-primary { background: #06beb6; color: white; }
    .btn-primary:hover { background: #04a39c; transform: translateY(-2px); }
    .results { text-align: center; padding: 30px; }
    .results h2 { font-size: 2.2em; margin-bottom: 20px; }
    .results-stats { font-size: 1.4em; margin: 20px 0; }
    .progress-bar { width: 100%; height: 8px; background: rgba(255,255,255,0.3); border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #4caf50, #8bc34a); transition: width 0.3s; border-radius: 10px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="container">
    <h1><i class="fas fa-project-diagram"></i> Quiz 4</h1>
    <p class="subtitle">Ch. 5: Clustering & Ch. 6: Dimensionality Reduction</p>

    <div id="startScreen">
      <button class="start-btn" onclick="startQuiz()"><i class="fas fa-play-circle"></i> Start Quiz</button>
    </div>

    <div id="progressContainer" class="hidden">
      <div class="progress-bar"><div id="progressFill" class="progress-fill" style="width:0%"></div></div>
    </div>

    <div id="quizCard" class="quiz-card hidden">
      <div class="question-header">
        <span class="question-number" id="questionNumber"></span>
        <span class="score" id="score"></span>
      </div>
      <div class="question-text" id="questionText"></div>
      <div class="options" id="options"></div>
      <div id="feedback" class="feedback hidden"></div>
      <div class="btn-container"><button id="nextBtn" class="btn btn-primary hidden" onclick="nextQuestion()">Next Question <i class="fas fa-arrow-right"></i></button></div>
    </div>

    <div id="results" class="quiz-card hidden">
      <div class="results">
        <h2><i class="fas fa-trophy"></i> Quiz Complete!</h2>
        <div class="results-stats"><div id="finalScore"></div><div id="percentage"></div></div>
        <div class="btn-container"><button class="btn btn-primary" onclick="location.reload()"><i class="fas fa-redo"></i> Try Again</button></div>
      </div>
    </div>
  </div>

<script>
const questions = [
  // K-MEANS
  { type: 'multiple-choice', question: 'K-Means is a ______ clustering algorithm.', options: ['density-based','centroid-based','graph-based','hierarchical'], correct: 1, explanation: 'K-Means partitions data into k clusters by minimizing within-cluster squared distances to centroids.' },
  { type: 'fill-blank', question: 'The K-Means objective minimizes the within-cluster sum of squares, also called __________.', answer: 'inertia', acceptableAnswers: ['inertia','wcss','within-cluster sum of squares','within cluster sum of squares'], explanation: 'Inertia (WCSS) summarizes squared distances of points to their assigned centroids.' },
  { type: 'multiple-choice', question: 'Which method helps pick k in K-Means by finding a “knee” in the inertia curve?', options: ['Silhouette method','Elbow method','Gap statistic','AIC'], correct: 1, explanation: 'The Elbow method inspects the inertia vs. k curve for a diminishing-returns knee.' },
  { type: 'multiple-choice', question: 'Random initialization in K-Means can be improved by:', options: ['KMeans++ seeding','Using hierarchical seeds','Setting k = n','Min–max scaling output'], correct: 0, explanation: 'k-means++ picks initial centers to be far apart, improving convergence and stability.' },

  // HIERARCHICAL
  { type: 'multiple-choice', question: 'Agglomerative clustering proceeds by:', options: ['Top-down splitting','Bottom-up merging','Random assignment first','Gradient descent'], correct: 1, explanation: 'Agglomerative (bottom-up) starts with singletons and merges clusters iteratively.' },
  { type: 'multiple-choice', question: 'Which linkage maximizes the distance between cluster pairs when merging?', options: ['Single linkage','Complete linkage','Average linkage','Ward linkage'], correct: 1, explanation: 'Complete linkage uses the maximum pairwise distance between clusters.' },
  { type: 'fill-blank', question: 'A __________ visualizes the hierarchical merges across distance thresholds.', answer: 'dendrogram', acceptableAnswers: ['dendrogram'], explanation: 'A dendrogram shows the nested clustering structure formed during agglomerative clustering.' },
  { type: 'multiple-choice', question: 'Cluster assignments from hierarchical clustering are selected by:', options: ['Cutting the dendrogram at a chosen height','Choosing k with cross-entropy','Maximizing AUC','Using class labels'], correct: 0, explanation: 'Selecting a cut height (or number of clusters) yields a flat partition.' },

  // CLUSTERING EVALUATION
  
  // PCA
  { type: 'multiple-choice', question: 'PCA seeks directions (components) that maximize:', options: ['Classification accuracy','Between-class variance','Total variance of the data','Mutual information'], correct: 2, explanation: 'PCA finds orthogonal directions capturing maximal variance.' },
  { type: 'fill-blank', question: 'The percentage of variance explained by each principal component is called the __________.', answer: 'explained variance ratio', acceptableAnswers: ['explained variance ratio','explained variance','variance explained'], explanation: 'Explained variance ratio quantifies how much variance each PC captures.' },
  { type: 'multiple-choice', question: 'A scree plot typically shows:', options: ['Component loadings vs. features','Explained variance (or eigenvalues) vs. component index','Reconstruction error vs. epochs','Accuracy vs. k'], correct: 1, explanation: 'Scree plots show eigenvalues or explained variance by component index.' },

  // t-SNE
  { type: 'multiple-choice', question: 't-SNE is primarily used for:', options: ['High-speed linear compression','Supervised classification','Nonlinear visualization in 2D/3D','Kernel density estimation'], correct: 2, explanation: 't-SNE preserves local neighbor structure for visualization.' },
  { type: 'fill-blank', question: 'In t-SNE, the user-controlled neighborhood size parameter is called __________.', answer: 'perplexity', acceptableAnswers: ['perplexity'], explanation: 'Perplexity roughly controls the effective number of nearest neighbors considered.' },
  { type: 'multiple-choice', question: 't-SNE optimizes which divergence between probability distributions?', options: ['Jensen–Shannon','Kullback–Leibler (KL)','Hellinger','Wasserstein'], correct: 1, explanation: 't-SNE minimizes KL divergence between high- and low-dimensional neighbor distributions.' },

  // ICA
  { type: 'multiple-choice', question: 'ICA seeks components that are statistically:', options: ['Orthogonal only','Uncorrelated only','Independent (often non-Gaussian)','Identical'], correct: 2, explanation: 'ICA looks for independent sources; independence is stronger than mere uncorrelatedness.' },
  { type: 'fill-blank', question: 'A classic application of ICA is __________ source separation.', answer: 'blind', acceptableAnswers: ['blind','blind source separation','bss'], explanation: 'Blind Source Separation (BSS) recovers independent signals from mixtures.' },
  { type: 'multiple-choice', question: 'Which statement best contrasts PCA and ICA?', options: ['Both find independent components','PCA maximizes variance; ICA maximizes independence','PCA is nonlinear; ICA is linear','ICA assumes Gaussian sources'], correct: 1, explanation: 'PCA finds uncorrelated directions maximizing variance; ICA seeks statistically independent components.' },

  // LIBRARIES/MODULES
  { type: 'multiple-choice', question: 'PCA in scikit-learn is implemented in:', options: ['sklearn.cluster','sklearn.manifold','sklearn.decomposition','sklearn.metrics'], correct: 2, explanation: 'Use sklearn.decomposition.PCA.' },
  { type: 'multiple-choice', question: 'Agglomerative clustering is available in:', options: ['sklearn.tree','sklearn.cluster','sklearn.svm','sklearn.naive_bayes'], correct: 1, explanation: 'Use sklearn.cluster.AgglomerativeClustering; dendrograms via scipy.cluster.hierarchy.' },
  { type: 'fill-blank', question: 'Hierarchical clustering dendrogram utilities are found in __________.cluster.hierarchy.', answer: 'scipy', acceptableAnswers: ['scipy'], explanation: 'Use scipy.cluster.hierarchy for linkage and dendrogram plotting.' }
];

let currentQuestion = 0, score = 0, answered = false;

function startQuiz(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('progressContainer').classList.remove('hidden');
  document.getElementById('quizCard').classList.remove('hidden');
  questions.sort(()=>Math.random()-0.5); currentQuestion=0; score=0; displayQuestion();
}

function displayQuestion(){
  const q = questions[currentQuestion];
  document.getElementById('questionNumber').textContent = 'Question '+(currentQuestion+1)+'/'+questions.length;
  document.getElementById('score').textContent = 'Score: '+score+'/'+currentQuestion;
  document.getElementById('questionText').textContent = q.question;
  document.getElementById('feedback').classList.add('hidden');
  document.getElementById('nextBtn').classList.add('hidden');
  const optionsDiv = document.getElementById('options'); optionsDiv.innerHTML='';
  document.getElementById('progressFill').style.width = (currentQuestion / questions.length) * 100 + '%';

  if (q.type==='fill-blank'){
    const input=document.createElement('input'); input.type='text'; input.className='text-input'; input.id='fillBlankInput'; input.placeholder='Type your answer here...';
    input.addEventListener('keypress', e=>{ if(e.key==='Enter') checkFillBlank(); });
    const btn=document.createElement('button'); btn.className='submit-btn'; btn.textContent='Submit Answer'; btn.onclick=checkFillBlank;
    optionsDiv.appendChild(input); optionsDiv.appendChild(btn); setTimeout(()=>input.focus(),100);
  } else { // multiple-choice
    for (let i=0;i<q.options.length;i++){
      const el=document.createElement('div'); el.className='option'; el.textContent=q.options[i]; el.onclick=()=>selectOption(i); optionsDiv.appendChild(el);
    }
  }
  answered=false;
}

function checkFillBlank(){
  if (answered) return; const input=document.getElementById('fillBlankInput'); const user=(input.value||'').trim().toLowerCase(); const q=questions[currentQuestion]; if(!user){ alert('Please enter an answer!'); return; }
  answered=true; input.disabled=true; let ok=false; for(const a of q.acceptableAnswers){ const t=a.toLowerCase(); if(user===t || user.includes(t)){ ok=true; break;} }
  const fb=document.getElementById('feedback'); if(ok){ score++; fb.className='feedback correct'; fb.innerHTML='<i class="fas fa-check-circle"></i> <strong>Correct!</strong><br>'+q.explanation; } else { fb.className='feedback incorrect'; fb.innerHTML='<i class="fas fa-times-circle"></i> <strong>Incorrect.</strong><br>Correct answer: <strong>'+q.answer+'</strong><br>'+q.explanation; }
  fb.classList.remove('hidden'); document.getElementById('nextBtn').classList.remove('hidden'); document.getElementById('score').textContent='Score: '+score+'/'+(currentQuestion+1);
}

function selectOption(i){
  if (answered) return; answered=true; const q=questions[currentQuestion]; const opts=document.querySelectorAll('.option'); opts.forEach(o=>o.classList.add('disabled')); opts[q.correct].classList.add('correct');
  const fb=document.getElementById('feedback'); if(i===q.correct){ score++; fb.className='feedback correct'; fb.innerHTML='<i class="fas fa-check-circle"></i> <strong>Correct!</strong><br>'+q.explanation; } else { opts[i].classList.add('incorrect'); fb.className='feedback incorrect'; fb.innerHTML='<i class="fas fa-times-circle"></i> <strong>Incorrect.</strong><br>'+q.explanation; }
  fb.classList.remove('hidden'); document.getElementById('nextBtn').classList.remove('hidden'); document.getElementById('score').textContent='Score: '+score+'/'+(currentQuestion+1);
}

function nextQuestion(){ currentQuestion++; if(currentQuestion<questions.length) displayQuestion(); else showResults(); }

function showResults(){
  document.getElementById('quizCard').classList.add('hidden');
  document.getElementById('progressContainer').classList.add('hidden');
  document.getElementById('results').classList.remove('hidden');
  const pct=Math.round((score/questions.length)*100);
  document.getElementById('finalScore').innerHTML='You scored <strong>'+score+'</strong> out of <strong>'+questions.length+'</strong>';
  const msg=pct>=90?'Outstanding!':pct>=80?'Great job!':pct>=70?'Good work!':pct>=60?'Keep practicing!':'Review the material and try again!';
  document.getElementById('percentage').innerHTML='<strong>'+pct+'%</strong><br>'+msg;
  document.getElementById('progressFill').style.width='100%';
}
</script>
</body>
</html>
